<template name="dashboard">

  <div class="contentPage fourteen wide column">
    {{#with currentUser}}
        {{#with profile}}

        {{#if isCustomer }}

    <div class="ui two column stackable doubling grid">
      <div class="column">
        <div class="ui segment customer-table">
          <div class="ui statistic" style="text-align:center;margin:0 auto; display:block;width:100%;max-width:100%;">
            <div class="label">
              Points
            </div>
            <div class="value">
              {{rewardpoints}}
            </div>
          </div>

          <table class="ui orange table">
            <thead>
            <tr>
              <th>
                Points
              </th>
              <th>
                Date
              </th>
            </tr>
          </thead>
          {{#each getPoints}}
          <tr>
            <td>
            {{points}}
          </td>
          <td>
            {{createdAtFormatted}}
          </td>
        </tr>
          {{/each}}
        </table>

          <div class="align-right">
            <a href="pointsHistory">
            View point history
          </a>
          </div>
        </div>
      </div>
      <div class="column">

        <div class="ui segment customer-table">

          <div class="ui statistic" style="text-align:center;margin:0 auto; display:block;width:100%;max-width:100%;">
            <div class="label">
              Balance
            </div>
            <div class="value">
              ${{getMoneyBalance}}
            </div>
          </div>

          <table class="ui orange table">
            <thead>
            <tr>
              <th>
                Total Amount
              </th>
              <th>
                Paid Amount
              </th>
              <th>
                Differences
              </th>
              <th>
                Date
              </th>
            </tr>
          </thead>
          {{#each getTransactions}}
          <tr>
            <td>
            ${{totalAmount}}
          </td>
          <td>
            ${{actualAmount}}
          </td>
          <td>
            ${{transactionDiffAmount}}
          </td>
          <td>
            {{createdAtFormatted}}
          </td>
        </tr>
          {{/each}}
        </table>


          <div class="align-right">
            <a href="transactionsHistory">
            View transaction history
          </a>
          </div>
        </div>
      </div>

    </div>

    {{/if}}
    {{/with}}
  {{/with}}
  <div class="ui fourteen column">

    {{#if isCustomer }}
    <div class="row">
    <h2 class="ui header" style="padding:10px;">
      Featured Vouchers
    </h2>
  </div>

            <div class="ui link cards featured_vouchers">
            {{#each vouchersList}}
                <div class="card voucherCard">
                  <div class="image">
                    <img src="/upload/{{image_url}}" />
                  </div>
                  <div class="content" style="text-align:center;display:block;">
                    <div class="header">{{name}}</div>
                    <div class="meta">
                      <a>Voucher</a>
                    </div>
                    <div class="description">
                      <b style="font-size:26px;color:#2689a8;">
                        Redeem with <br />
                        {{points}} points
                      </b>
                    </div>
                  </div>
                  <div class="extra content">
                    <span class="right floated">

                      <a href="/redeem/{{_id}}/{{user_id}}">
                      <div class="ui green button">Redeem</div>
                    </a>

                    </span>
                    <span>
                      <i class="user icon"></i>
                      {{quantity}} Vouchers Left
                    </span>
                  </div>
                </div>
            {{/each}}
      </div>
      <div class="row">
      <a href="/vouchers">
        <input class="ui green submit button"  style="width:100%;height:60px;padding:10px;" type="button" value="View All Vouchers"/>
      </a>
    </div>
      {{/if}}


      {{#if isRetailer }}

      <div class="ui two column stackable doubling grid">
        <div class="column">
          <div class="ui segment customer-table">
            <div class="ui statistic" style="text-align:center;margin:0 auto; display:block;width:100%;max-width:100%;">
              <div class="label">
                Total Vouchers
              </div>
              <div class="value">
                {{getTotalRetailVouchers}}
              </div>
            </div>



          </div>
        </div>
        <div class="column">

          <div class="ui segment customer-table">

            <div class="ui statistic" style="text-align:center;margin:0 auto; display:block;width:100%;max-width:100%;">
              <div class="label">
                  Total Vouchers Redeemed
              </div>
              <div class="value">
                351
              </div>
            </div>

          </div>
        </div>

      </div>

      <div class="ui link cards featured_vouchers">

        {{#each latestVouchers}}
            <div class="card voucherCard">
              <div class="image">
                <img src="/upload/{{image_url}}" />
              </div>
              <div class="content" style="text-align:center;display:block;">
                <div class="header">{{name}}</div>
                <div class="meta">
                  <a>Voucher</a>
                </div>
                <div class="description">
                  <b style="font-size:26px;color:#2689a8;">
                    Redeem with <br />
                    {{points}} points
                  </b>
                </div>
              </div>
              <div class="extra content">
                <span class="right floated">


                </span>
              </div>
            </div>
        {{/each}}
      </div>


      {{/if}}





    </div>

  </div>


</template>
